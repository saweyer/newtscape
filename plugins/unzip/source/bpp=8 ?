depth =8 ???	local /*byte[]*/ grayMap;	if depth=8	then begin		grayMap := MakeBinary(256,'bytes);		local int i, r, g, b, gray;		for i:=0 to 255		do begin			r := Band(i,      0x7);			g := Band(i >> 3, 0x7);			b := Band(i >> 6, 0x3);			//Gray = 0.3R + 0.59G + 0.11B			gray := min(15, Floor(0.5 + (0.3 * (r*15/7)) + (0.59 * (g*15/7)) + (0.11 * (b*5))));			StuffByte(grayMap, i, gray);			end;		depth := 4;		end;	local int rowBytes8 := if grayMap then 4*(((width*8) + 31) div 32) else rowBytes;			if grayMap			then begin // change bpp=8 to 2*bpp=4				toff := dtop - (y*rowBytes8) + (x*2);				byte  := Bor(					Band(0xF0, ExtractByte(data, toff)),	// keep high 4-bits of each					ExtractByte(data, toff+1) >> 4					//ExtractByte(grayMap, ExtractByte(data, toff  )) << 4,					//ExtractByte(grayMap, ExtractByte(data, toff+1))					);				end			else 