Mime-Version: 1.0Date: Tue, 15 Dec 1998 06:52:58 -0800To: Steve Weyer <sweyer@bellatlantic.net> From: "Ray Rischpater, KF6GPE" <dove@lothlorien.com> Subject: Re: NH plugin API>hi Ray,>I was entertaining the following (heretical*) notion: if I wanted to create a JPEG plugin for NetHopper, how would I go about doing it?You'd want to create a viewer. Given a bit of finagling, I could probably hunt up some source as an example at the office. I don't have anything handy at the moment, but I could find it in short order. >[maybe not so heretical assuming there are a large number of NH users out there who are content enough not to switch (to Newt's Cape) because of interface, functionality, cost, inertia, etc. but who might not mind paying a little for a plugin]Yep. For better or for worse, we had one market advantage - we were free to the consumer. You guys always had the better feature set, though, in most ways.I started JPEG twice -- I suspect the scaffolding is still intact, may not have any Spyglass/AllPen copyrights, and that would be what I'd like to give you. Since it was on the QT, I think I can give it to you without violating any of the junk I signed when we were bought. :) >I've looked thru the NH API docs, but am a little confused about the advantages/disadvantages of data handlers vs. converters vs. viewers. The docs are terrible. They're our internal design documents, stripped of all the warts design documents grow. We never had a tech writer to clean them up; we were too small.>if our converter went to a raw GIF, then I could probably just use a data converter>(our Newt's Cape plugin goes from JPEG directly to Newton bitmap frame format). If I wanted to handle the display myself, I could create a viewer. And I suppose a stasher for separately caching object. I'd suggest using the JPEG parser you've got to go to a Newton bitmap frame. That would be very cool. You don't need to worry about creating stashers; the sample I can dig out shows how to use the standard sample to stuff your stuff into the NetHopper cache. You'll want to use a VBO for the image in that case; I can't recall now what happens if you use heap space, but you're probably not doing that for images in any case. >What I'd really like to do is register for "image/jpeg", get the raw byte stream, convert it to Newton format, then hand it to NetHopper to cache/display -- could NH basically treat it as an already-converted GIF, i.e., 1) cache converted result for future use; 2) display it as it would a converted GIF. (that way I wouldn't have to deal with viewers, stashers, which seem pretty redundant to me since NH can already handle images). Hmm. We've not done a lot with data converters, although the API's there. That ought to work, although what I'm reading is that you'd want to circumvent the viewer interface, which wouldn't work. It would almost be easier to modify the image decoder to handle both GIFs and JPEG's and use that as the base, and then integrate your JPEG decoder. >how possible/easy is this?If you had the source to the image decoder, quite easy. If you didn't, it would be far easier to write a viewer -- the skeleton's about a half dozen methods. With the skeleton, you could even replace the existing GIF viewer (yours may be faster, if I recall) and integrate your GIF code fairly easily. The skeleton just wants a method which takes a compressed image and returns the Newton bitmap; it's got the other viewer methods defined for you.Let me poke around today & possibly tomorrow; I probably have something here I can give you that will get you 80% of the way there. >what're you up to these days -- still with Spyglass? Yep. Engineering manager for the Los Gatos office now. It's fun, challenging, and really weird. I do often miss the Newton. CE doesn't suck as much as it used to... I've even written a little. I'm coding a lot more at home now, mostly in Java for amateur radio stuff. I hope to release some beta software after the holiday, all far to large to run on palmtops at this stage, but I believe things will catch up shortly. And you?Good to hear from you!---------------------------------------------------------------------- Ray Rischpater, KF6GPE	http://www.lothlorien.comUnsolicited commercial/propaganda email subject to legal action. Under US Code Title 47, Sec.227(a)(2)(B), Sec.227(b)(1)(C), and Sec.227(b)(3)(C), a State may impose a fine of not less than $500 per message. See http://www.law.cornell.edu/uscode/47/227.html